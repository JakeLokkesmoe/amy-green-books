---
import { mainMenu } from '../siteConfig';
import { BookSummaryType } from '../util/book';
import NavigationLink from './navigationLink';

export interface Props {
  title: string;
  subtitle: string;
}

const { title, subtitle } = Astro.props;

const books = await Astro.glob<BookSummaryType>('../pages/books/*.md');
const mainMenuItems = mainMenu(books);
---

<div class="hero cover bg-cover banner">
  <div class="dim">
    <header class="mw7 center pv5 pv6-l ph3 tr mb3">
      <h1 class="f2 f1-l b lh-title white mb2">{title}</h1>
      <p class="f3 fw5 lh-title mw-100 black">{subtitle}</p>
    </header>

    <nav class="flex justify-center bw2 white bg-black main-nav">
      <ul class="flex flex-wrap justify-between w-100 mw6">
        {mainMenuItems.map((menu) => (
        <NavigationLink {...menu} client:load />
        ))}
      </ul>
    </nav>
  </div>
</div>

<style>
  .banner {
    background-image: url('/media/typewriter-banner.jpg?nf_resize=fit&h=350');
    background-image: image-set(url('/media/typewriter-banner.jpg?nf_resize=fit&h=350') 1x,
        url("/media/typewriter-banner.jpg?nf_resize=fit&h=700") 2x);
    background-position: 84% 70%;
  }

  .dim {
    background-color: rgba(0, 0, 0, 0.1);
  }

  @media screen and (min-width: 60em) {
    .banner {
      background-image: url("/media/typewriter-banner.jpg?nf_resize=fit&h=600");
      background-image: image-set(url("/media/typewriter-banner.jpg?nf_resize=fit&h=600") 1x,
          url("/media/typewriter-banner.jpg?nf_resize=fit&h=1200") 2x);
    }
  }
</style>